[defaults]
stack_limit = 99
max_loop_limit = 60
tav_level_thresholds = [0, 50, 150, 300, 600]
skill_level_thresholds = [0, 10, 20, 40, 80]
default_schedule = [
  # A more balanced day: start with work to satisfy tests relying on block 0
  # 0-7 work (8 blocks), 8 bathtime, 9-16 work (8 blocks),
  # 17-19 downtime (3), 20 bathtime (1), 21-23 bedtime (3)
  "work",     # 0
  "work",     # 1
  "work",     # 2
  "work",     # 3
  "work",     # 4
  "work",     # 5
  "work",     # 6
  "work",     # 7
  "bathtime", # 8
  "work",     # 9
  "work",     # 10
  "work",     # 11
  "work",     # 12
  "work",     # 13
  "work",     # 14
  "work",     # 15
  "work",     # 16
  "downtime", # 17
  "downtime", # 18
  "downtime", # 19
  "bathtime", # 20
  "bedtime",  # 21
  "bedtime",  # 22
  "bedtime"   # 23
]

[defaults.ability_scores]
str = 10
dex = 10
con = 10
int = 10
wis = 10
cha = 10

[[items]]
id = "log"
name = "Log"
description = "Rough-hewn wood ready for crafting."
stack_limit = 99
weight = 2
value = 3
tags = ["resource", "wood"]

[[items]]
id = "torch"
name = "Torch"
description = "A basic torch for exploring dark places."
stack_limit = 5
weight = 1
value = 6
tags = ["utility", "light_source"]

[[items]]
id = "plank"
name = "Plank"
description = "Sturdy lumber suitable for construction."
stack_limit = 50
weight = 3
value = 8
tags = ["resource", "wood"]

[[items]]
id = "stone_block"
name = "Stone Block"
description = "A heavy chunk of stone for masonry and fortifications."
stack_limit = 40
weight = 8
value = 12
tags = ["resource", "stone"]

[[items]]
id = "iron_ore"
name = "Iron Ore"
description = "Raw iron ore ready for smelting."
stack_limit = 60
weight = 5
value = 15
tags = ["resource", "metal"]

[[items]]
id = "healing_potion"
name = "Healing Potion"
description = "Restorative elixir favored by adventurers."
stack_limit = 10
weight = 1
value = 30
tags = ["consumable", "potion"]

[[skills]]
id = "logging"
name = "Logging"
description = "logging the wood"
priority = 5
targets = ["small_tree", "big_tree"]
add_requirements = []
execute_requirements = [
  { op = "ability_min", ability = "str", value = 10 },
  { op = "custom", name = "logging_allowed" },
  { op = "flag_present", flagId = "schedule_block_work" },
]

[[skills]]
id = "wood_craft"
name = "Wood Craft"
description = "Craft the wood"
priority = 6
targets = ["plank"]
add_requirements = [
  { op = "skill_level_min", skillId = "logging", level = 2 },
  { op = "flag_present", flagId = "sawmill_ready" },
]
execute_requirements = [
  { op = "item_required", itemId = "log", quantity = 2 },
  { op = "flag_present", flagId = "schedule_block_work" },
]

[[skills]]
id = "idle"
name = "Idle"
description = "Do nothing"
priority = 5
targets = ["null"]
add_requirements = []
execute_requirements = []

[[skills]]
id = "meditate"
name = "Meditate"
description = "Focus to gain insight"
priority = 5
targets = ["null"]
add_requirements = []
execute_requirements = [
  { op = "flag_present", flagId = "schedule_block_work" },
]
completion_effect = { tav_xp = 60 }

[[skills]]
id = "scribe"
name = "Scribe"
description = "Write records, requires experience"
priority = 6
targets = ["null"]
add_requirements = []
execute_requirements = [
  { op = "tav_level_min", level = 2 },
  { op = "flag_present", flagId = "schedule_block_work" },
]

[[skills]]
id = "scribe_pro"
name = "Scribe Pro"
description = "Advanced scribing unlocked by logging skill level"
priority = 7
targets = ["null"]
add_requirements = []
execute_requirements = [
  { op = "skill_level_min", skillId = "logging", level = 3 },
  { op = "flag_present", flagId = "schedule_block_work" },
]

[[skills]]
id = "self_train"
name = "Self Train"
description = "Train yourself; requires own level >= 2"
priority = 5
targets = ["null"]
add_requirements = []
execute_requirements = [
  { op = "skill_level_min", skillId = "self_train", level = 2 },
  { op = "flag_present", flagId = "schedule_block_work" },
]
completion_effect = { skill_xp = 10 }

[[skills]]
id = "scribe_elite"
name = "Scribe Elite"
description = "Senior scribe requiring tav level 2"
priority = 7
targets = ["null"]
add_requirements = []
execute_requirements = [
  { op = "tav_level_min", level = 2 },
  { op = "flag_present", flagId = "schedule_block_work" },
]

[[skills]]
id = "survey"
name = "Survey"
description = "Scout the surroundings"
priority = 3
targets = ["forest_edge", "mountain_pass"]
add_requirements = []
execute_requirements = [
  { op = "or", requirements = [
    { op = "flag_present", flagId = "scout_ready" },
    { op = "skill_level_min", skillId = "logging", level = 3 },
  ] },
  { op = "flag_present", flagId = "schedule_block_work" },
]


[[targets]]
id = "small_tree"
name = "Small tree"
description = "a small tree"
add_requirements = [
  { op = "flag_present", flagId = "forest_access" },
]
execute_requirements = []
skills = ["logging", "survey"]
completion_effect = { tav_xp = 3, skill_xp = 10, inventory = { log = 1 } }

[[targets]]
id = "big_tree"
name = "Big tree"
description = "a towering tree"
add_requirements = []
execute_requirements = [
  { op = "ability_min", ability = "str", value = 12 },
]
skills = ["logging"]
completion_effect = { tav_xp = 4, skill_xp = 12, inventory = { log = 2 } }

[[targets]]
id = "plank"
name = "Plank"
description = "a wooden plank"
add_requirements = [
  { op = "flag_present", flagId = "sawmill_ready" },
]
execute_requirements = []
skills = ["wood_craft"]
completion_effect = { skill_xp = 15, inventory = { log = -2, plank = 1 } }

[[targets]]
id = "forest_edge"
name = "Forest edge"
description = "a dense treeline"
add_requirements = []
execute_requirements = [
  { op = "and", requirements = [
    { op = "flag_present", flagId = "forest_access" },
    { op = "item_required", itemId = "torch", quantity = 1 },
  ] },
]
skills = ["survey"]
completion_effect = { tav_xp = 5 }

[[targets]]
id = "mountain_pass"
name = "Mountain pass"
description = "a steep mountain pass"
add_requirements = [
  { op = "ability_min", ability = "con", value = 11 },
]
execute_requirements = [
  { op = "custom", name = "weather_clear" },
]
skills = ["survey"]
completion_effect = { tav_xp = 7 }
